PostgreSQL tables
-----------------

A data dictionary describing available datastore database tables.

Core project and trace data (i.e., data loaded through ETL)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. csv-table::
   :header: "Name of Table", "Name of Row", "Description of Row"

   "datastore_project","",""
   "","id","Primary key"
   "","project_id","Unique project identifier provided by the user"
   "","baseline_period_start","[null]"
   "","baseline_period_end","Populated through ETL from project data"
   "","reporting_period_start","Populated through ETL from project data"
   "","reporting_period_end","[null]"
   "","zipcode","Populated through ETL from project data"
   "","project_owner_id","Optional foreign key to `datastore_projectowner` table"
   "","added","Date Added"
   "","updated","Date updated"
   "datastore_trace","","Refers to an energy trace (a time series of data from a meter)"
   "","id","Primary key"
   "","trace_id","Unique identifier for trace"
   "","interpretation","Type of energy data."
   "","unit","Unit of measure"
   "","added","Date that the data was added to the database"
   "","updated","Timestamp for last updated"
   "datastore_tracerecord","","Single point in trace timeseries"
   "","id","Primary key"
   "","trace_id","Foreign key to `datastore_trace` table"
   "","value","Value from start of this record to start of the next record"
   "","estimated","True/False"
   "","start","Start time of interval; end is given by next record (as ordered by start timestamp)."
   "datastore_project_traces","","Many-to-many table linking projects and traces"
   "","project_id","Foriegn key to `datastore_project` table"
   "","trace_id","Foriegn key to `datastore_trace` table"
   "datastore_projectmetadata","","Project metadata"
   "","project_id","Foriegn key to `datastore_project` table"
   "","key","String identifying metadata type"
   "","value","Value of metadata"
   "datastore_tracegroup","","Grouping of traces defined by a filter"
   "","name","Name of group"
   "","filter_specification","JSON specification of filter defining group"

Meter run and meter result data
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Metering tables

.. csv-table::
   :header: "Name of Table", "Name of Row", "Description of Row"

   "metering_meterderivative","","Table of predictive and descriptive summaries of savings"
   "","id","Primary key"
   "","interpretation","Interpretation of derivative (e.g., gross_predicted/annualized_weather_normal)"
   "","unit","Unit of values, upper and lower bounds."
   "","baseline_value","Modeled counterfactual baseline value"
   "","baseline_lower","Amount to be subtracted from baseline_value to obtain lower bound on 95% confidence interval"
   "","baseline_upper","Amount to be added to baseline_value to obtain upper bound on 95% confidence interval"
   "","baseline_n","Number of points in baseline demand fixture"
   "","reporting_value","Modeled reporting period value"
   "","reporting_lower","Amount to be subtracted from reporting_value to obtain lower bound on 95% confidence interval"
   "","reporting_upper","Amount to be added to reporting_value to obtain upper bound on 95% confidence interval"
   "","reporting_n","Number of points in reporting demand fixture"
   "","added","Date added"
   "","updated","Date updated"
   "","meter_result_id","Primary key of meter result this derivative was extracted from"
   "","modeling_period_group_id","Primary key of modeling period group describing baseline and reporting period details"
   "","trace_id","Primary key of trace this derivative applies to"
   "metering_meterresult","","Table of meter run results"
   "","id","Primary key"
   "","meter_output","Filename of JSON serialization of meter output"
   "","status","SUCCESS/FAILURE"
   "","eemeter_version","Version of eemeter library used to calculate this result"
   "","datastore_version","Version of datastore application used to calculate this result"
   "","model_class","Name of model class"
   "","model_kwargs","Keyword arguments to model class"
   "","formatter_class","Name of formatter class"
   "","formatter_kwargs","Keyword arguments to formatter class"
   "","added","Date added"
   "","updated","Date updated"
   "","meter_run_id","Primary key of meter run"
   "","project_id","Primary key of project data"
   "","trace_id","Primary key of trace"
   "metering_meterrun","","Table of meter runs"
   "","id","Primary key"
   "","meter_input","Filename of JSON serialiation"
   "","status","PENDING/RUNNING/SUCCESS/FAILURE"
   "","failure_message","Failure message, if any"
   "","traceback","Traceback text, if error occured"
   "","model_class","Name of model class supplied, if any"
   "","model_kwargs","Model class keyword arguments supplied, if any"
   "","formatter_class","Name of formatter class supplied, if any"
   "","formatter_kwargs","Formatter class keyword arguments supplied, if any"
   "","added","Date added"
   "","updated","Date updated"
   "","project_id","Primary key of project data"
   "","trace_id","Primary key of trace"
   "metering_modelingperiod","","Table describing a modeling period"
   "","id","Primary key"
   "","label","Label to distinguish from other baseine/reporting/periods in same meter result"
   "","interpretation","BASELINE/REPORTING"
   "","start","Date of modeling period start, if any (can be blank for baseline)"
   "","end","Date of modeling period end, if any (can be blank for reporting)"
   "","meter_result_id","Primary key of containing meter result"
   "metering_modelingperiodgroup","","Table describing a pair of modeling periods (baseline + reporting)"
   "","id","Primary key"
   "","baseline_id","Primary key of baseline modeling period"
   "","meter_result_id","Primary key of containing meter result"
   "","reporting_id","Primary key of reporting modeling period"
   "metering_modelresult","","Table storing results from modeling"
   "","id","Primary key"
   "","status","SUCCESS/FAILURE"
   "","traceback","Traceback, if any"
   "","start_date","Start date of data used in modeling"
   "","end_date","End date of data used in modeling"
   "","n_rows","number of rows supplied as input to modeling"
   "","r2","R-squared model fit"
   "","cvrmse","Coefficient of variation of root mean squared error (rmse normalized by mean)"
   "","rmse","root mean squared error"
   "","lower","Value to be subtracted from any individual predicted point to obtain lower bound on 95% confidence interval"
   "","upper","Value to be added to aby individual predicted point to obtain upper bound on 95% confidence interval"
   "","added","Date added"
   "","updated","Date updated"
   "","meter_result_id","Primary key of meter result"
   "","modeling_period_id","Primary key of modeling period"
   "","trace_id","Primary key of trace"

Metering tables
^^^^^^^^^^^^^^^

.. csv-table::
   :header: "Name of Table", "Name of Row", "Description of Row"

   "metering_aggregationrun","","Aggregation task"
   "","id","Primary key"
   "","aggregation_input","Serialized aggregation input"
   "","status","PENDING/RUNNING/SUCCESS/FAILURE"
   "","failure_message","Failure message, if any"
   "","traceback","Traceback text, if error occured"
   "","trace_interpretation","Type of trace in this aggregation"
   "","derivative_interpretation","Type of derivative in this aggregation"
   "","aggregation_interpretation","Type of aggregation to be performed"
   "","group_id","Foreign key to `datastore_tracegroup` table"
   "","added","Date added"
   "","updated","Date updated"
   "metering_aggregationresult","","Aggregation task result"
   "","id","Primary key"
   "","aggregation_input","Serialized aggregation output"
   "","trace_interpretation","Type of trace in this aggregation"
   "","derivative_interpretation","Type of derivative in this aggregation"
   "","aggregation_interpretation","Type of aggregation to be performed"
   "","eemeter_version","Version of eemeter library used to calculate this result"
   "","datastore_version","Version of datastore application used to calculate this result"
   "","unit","Unit of measure"
   "","baseline_value","Modeled counterfactual baseline value"
   "","baseline_lower","Amount to be subtracted from baseline_value to obtain lower bound on 95% confidence interval"
   "","baseline_upper","Amount to be added to baseline_value to obtain upper bound on 95% confidence interval"
   "","baseline_n","Number of points in combined baseline demand fixtures"
   "","reporting_value","Modeled counterfactual reporting value"
   "","reporting_lower","Amount to be subtracted from reporting_value to obtain lower bound on 95% confidence interval"
   "","reporting_upper","Amount to be added to reporting_value to obtain upper bound on 95% confidence interval"
   "","reporting_n","Number of points in combined reporting demand fixtures"
   "","differential_direction","BASELINE_MINUS_REPORTING/REPORTING_MINUS_BASELINE"
   "","differential_value","Modeled counterfactual differential value"
   "","differential_lower","Amount to be subtracted from differential_value to obtain lower bound on 95% confidence interval"
   "","differential_upper","Amount to be added to differential_value to obtain upper bound on 95% confidence interval"
   "","differential_n","Number of points in combined differential demand fixture"
   "","added","Date added"
   "","updated","Date updated"
   "","aggregation_run_id","Foreign key to `metering_aggregationrun` table"
   "metering_aggregationderivativestatus","","Status of inclusion in aggregation"
   "","id","Primary key"
   "","status","ACCEPTED/REJECTED"
   "","baseline_status","Baseline result ACCEPTED or REJECTED"
   "","reporting_status","Reporting result ACCEPTED or REJECTED"
   "","aggregation_result_id","Foreign key to `metering_aggregationresult` table"
   "","derivative_id","Foreign key to `metering_meterderivative` table"

Warehouse tables
^^^^^^^^^^^^^^^^

.. csv-table::
   :header: "Name of Table", "Name of Row", "Description of Row"

   "warehouse_meterresultmart","","Summarized meter results"
   "","id","Primary key"
   "","trace_id","Trace identifing string"
   "","trace_pk","Primary key of trace"
   "","trace_interpretation","Type of trace"
   "","trace_unit","Unit of measure of trace"
   "","project_id","Project identifying string"
   "","project_pk","Primary key of project"
   "","serialized_input_url","Cloud storage location of serialized input"
   "","serialized_output_url","Cloud storage location of serialized output"
   "","meter_result_pk","Primary key of meter result "
   "","meter_result_status","Meter result status"
   "","meter_result_eemeter_version","eemeter library software version"
   "","meter_result_datastore_version","datastore library software version"
   "","meter_result_model_class","Model class used in model fitting"
   "","meter_result_model_kwargs","Keyword arguments used in model class initialization"
   "","meter_result_formatter_class","Formatter class used in model data formatting"
   "","meter_result_formatter_kwargs","Keyword arguments used in formatter class initialization"
   "","meter_result_added","Date meter result added"
   "","meter_result_updated","Date meter result updated"
   "","meter_run_pk","Primary key of meter run"
   "","meter_run_status","Meter run status"
   "","meter_run_failure_message","Failure message (if any)"
   "","meter_run_traceback","Traceback (if any)"
   "","meter_run_added","Date meter run added"
   "","meter_run_updated","Date meter result added"
   "","modeling_period_group_pk","Primary key of modeling period"
   "","derivative_pk","Primary key of derivative"
   "","derivative_interpretation","Type of derivative"
   "","derivative_unit","Unit of measure of derivative"
   "","baseline_period_pk","Primary key of baseline period"
   "","baseline_period_label","Label of baseline period"
   "","baseline_period_start","Start date of baseline period (if any)"
   "","baseline_period_end","End date of baseline period"
   "","baseline_model_result_pk","Primary key of baseline model result"
   "","baseline_model_result_status","Status of baseline model result"
   "","baseline_model_result_traceback","Traceback if failed"
   "","baseline_model_result_r2","R squared"
   "","baseline_model_result_cvrmse","Coefficient of variation of root mean squared error"
   "","baseline_model_result_n_rows","Number of rows in input"
   "","baseline_model_result_rmse","Root mean squared error"
   "","baseline_derivative_value","Baseline derivative value"
   "","baseline_derivative_lower_bound","95 percent confidence lower bound on baseline derivative value"
   "","baseline_derivative_upper_bound","95 percent confidence upper bound on baseline derivative value"
   "","reporting_period_pk","Primary key of reporting period"
   "","reporting_period_label","Label of reporting period"
   "","reporting_period_start","Start date of reporting period (if any)"
   "","reporting_period_end","End date of reporting period"
   "","reporting_model_result_pk","Primary key of reporting model result"
   "","reporting_model_result_status","Status of reporting model result"
   "","reporting_model_result_traceback","Traceback if failed"
   "","reporting_model_result_r2","R squared"
   "","reporting_model_result_cvrmse","Coefficient of variation of root mean squared error"
   "","reporting_model_result_n_rows","Number of rows in input"
   "","reporting_model_result_rmse","Root mean squared error"
   "","reporting_derivative_value","Reporting derivative value"
   "","reporting_derivative_lower_bound","95 percent confidence lower bound on reporting derivative value"
   "","reporting_derivative_upper_bound","95 percent confidence upper bound on reporting derivative value"
   "","differential_value","Savings value"
   "","differential_direction","BASELINE_MINUS_REPORTING/REPORTING_MINUS_BASELINE"
   "","differential_lower_bound","95 percent confidence lower bound on savings value"
   "","differential_upper_bound","95 percent confidence upper bound on savings value"
   "warehouse_groupstatisticsmart","","Summaries group statistics"
   "","id","Primary key"
   "","group_name","Name of group"
   "","group_pk","Primary key of group"
   "","serialized_input_url","Cloud storage location of serialized input"
   "","serialized_output_url","Cloud storage location of serialized output"
   "","aggregation_run_pk","Primary key of aggregation run"
   "","aggregation_run_status","Status of aggregation run"
   "","aggregation_run_failure_message","Failure message (if any)"
   "","aggregation_run_traceback","Traceback (if any)"
   "","aggregation_run_added","Date added"
   "","aggregation_run_updated","Date updated"
   "","aggregation_result_pk","Primary key of aggregation result"
   "","n_derivatives","Number of derivatives in group"
   "","aggregation_result_added","Date added"
   "","aggregation_result_updated","Date updated"
   "","aggregation_result_eemeter_version","eemeter library software version"
   "","aggregetion_result_datastore_version","datastore application software version"
   "","trace_interpretation","Type of trace included in aggreation"
   "","derivative_interpretation","Type of derivative included in aggregation"
   "","statistic_interpretation","Type of aggregation done"
   "","statistic_unit","Unit of measure"
   "","baseline_value","Aggregated baseline value"
   "","baseline_lower_bound","95 percent confidence lower bound"
   "","baseline_upper_bound","95 percent confidence upper bound"
   "","reporting_value","Aggregated reporting value"
   "","reporting_lower_bound","95 percent confidence lower bound"
   "","reporting_upper_bound","95 percent confidence upper bound"
   "","differential_value","Aggregated differential value"
   "","differential_direction","BASELINE_MINUS_REPORTING/REPORTING_MINUS_BASELINE"
   "","differential_lower_bound","95 percent confidence lower bound"
   "","differential_upper_bound","95 percent confidence upper bound"
   "","n_derivatives_accepted","Number of derivatives in group accepted"
   "","n_derivatives_accepted_baseline","Number of derivatives in group with accepted baseline result"
   "","n_derivatives_accepted_reporting","Number of derivatives in group with accepted reporting result"
   "","n_derivatives_rejected","Number of derivatives in group rejected"
   "","n_derivatives_rejected_baseline","Number of derivatives in group with rejected baseline result"
   "","n_derivatives_rejected_reporting","Number of derivatives in group with rejected reporting result"
